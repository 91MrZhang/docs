(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{458:function(a,s,t){"use strict";t.r(s);var r=t(27),e=Object(r.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),t("p",[a._v("è¿™é‡Œä»‹ç»ä¸€ä¸‹å®é™…å·¥ä½œä¸­å¸¸ç”¨çš„JVMã€GCå‚æ•°")])]),a._v(" "),t("h3",{attrs:{id:"jvm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jvm"}},[a._v("#")]),a._v(" JVM")]),a._v(" "),t("h4",{attrs:{id:"å †è®¾ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å †è®¾ç½®"}},[a._v("#")]),a._v(" å †è®¾ç½®")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Xms8196m")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Xmx8196m")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Xss400k")]),a._v("\n")])])]),t("p",[a._v("ç›®å‰ä¸šç•ŒåŸºæœ¬éƒ½è®¾æˆä¸€æ ·çš„ï¼Œå¥½å¤„å¦‚ä¸‹ï¼š")]),a._v(" "),t("ol",[t("li",[a._v("åˆæ¬¡å¯åŠ¨æ—¶ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šå› ä¸ºä½ çš„æœ€å°å€¼å¤šè¿›è¡Œå¾ˆå¤šæ¬¡GC")]),a._v(" "),t("li",[a._v("GCå®Œæˆäº†ï¼ŒJVMé‡Šæ”¾å †å†…å­˜ç»™OSï¼Œä¸å¤Ÿäº†è¿˜éœ€è¦å‘OSç”³è¯·ï¼Œéº»çƒ¦")]),a._v(" "),t("li",[a._v("å¦‚æœä½ çš„æ“ä½œç³»ç»Ÿç”¨äº†ç¡¬ç›˜å½“è™šæ‹Ÿå†…å­˜ï¼ŒçœŸå®å†…å­˜ä¸å¤Ÿçš„è¯ï¼Œå‘ç¡¬ç›˜ç”³è¯·æ•ˆç‡å¥‡ä½ï¼ˆJVMæŠŠç”¨çœŸå®å†…å­˜çš„æœºä¼šè®©ç»™äº†å…¶ä»–åº”ç”¨ï¼‰")])]),a._v(" "),t("p",[a._v("æ–¹æ³•åŒºä¸ç”¨é¢å¤–è®¾ç½®ï¼Œå› ä¸º1.8ä½¿ç”¨ç›´æ¥å†…å­˜äº†")]),a._v(" "),t("p",[a._v("åŸåˆ™ä¸Šå°½æœ€å¤§é™åº¦ä¿è¯å †ç©ºé—´å¤§å°ï¼Œå¹¶ä¸”ä¸è¦éšæ„æ”¹åˆ†ä»£å¤§å°å’Œåˆ†ä»£æ¯”ä¾‹ï¼ˆJDKå‚å•†ç»è¿‡å¤§é‡å®è·µç»™å‡ºçš„ç»“è®ºï¼Œä¸€å®šæ˜¯æœ‰é“ç†çš„ï¼Œè‡ªå·±ä¹±è°ƒå®¹æ˜“ä¸œè¾¹ä¸äº®è¥¿è¾¹äº®ï¼‰")]),a._v(" "),t("h4",{attrs:{id:"oomæ—¶ï¼Œç”Ÿæˆå †å¿«ç…§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#oomæ—¶ï¼Œç”Ÿæˆå †å¿«ç…§"}},[a._v("#")]),a._v(" OOMæ—¶ï¼Œç”Ÿæˆå †å¿«ç…§")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("HeapDumpOnOutOfMemoryError")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("HeapDumpPath")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\\usr\\xxx\\logs\\\n")])])]),t("p",[a._v("è¿™ä¸ªä¼šåœ¨OOMæ—¶ï¼Œç”Ÿæˆä¸€ä¸ªxxx.hprofçš„å †å¿«ç…§æ–‡ä»¶ï¼Œç”¨JProfileråè€…Eclipseçš„MATéƒ½å¯ä»¥æ‰“å¼€ï¼Œåœ¨å®é™…å·¥ä½œä¸­å¾ˆæœ‰ç”¨ï¼Œåˆ†æç»“æœå®šä½é—®é¢˜")]),a._v(" "),t("h3",{attrs:{id:"gc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gc"}},[a._v("#")]),a._v(" GC")]),a._v(" "),t("h4",{attrs:{id:"å„ç§gcå›æ”¶å™¨çš„æŒ‡å®šæ–¹å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å„ç§gcå›æ”¶å™¨çš„æŒ‡å®šæ–¹å¼"}},[a._v("#")]),a._v(" å„ç§GCå›æ”¶å™¨çš„æŒ‡å®šæ–¹å¼")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("-XX:+UseSerialGC")]),a._v(" "),t("th",[a._v("æ–°ç”Ÿä»£å’Œè€å¹´ä»£éƒ½ä½¿ç”¨ä¸²è¡Œæ”¶é›†å™¨")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("-XX:+UseParNewGC")]),a._v(" "),t("td",[a._v("æ–°ç”Ÿä»£ä½¿ç”¨ParNewåƒåœ¾å›æ”¶å™¨ï¼Œè€å¹´ä»£ä½¿ç”¨ä¸²è¡Œæ”¶é›†å™¨")])]),a._v(" "),t("tr",[t("td",[a._v("-XX:+UseParallelGC")]),a._v(" "),t("td",[a._v("æ–°ç”Ÿä»£ä½¿ç”¨PararllelGCå›æ”¶å™¨ï¼Œè€å¹´ä»£ä½¿ç”¨ä¸²è¡Œæ”¶é›†å™¨")])]),a._v(" "),t("tr",[t("td",[a._v("-XX:+UseParallelOldGC")]),a._v(" "),t("td",[a._v("æ–°ç”Ÿä»£ä½¿ç”¨ParallelGC,è€å¹´ä»£ä½¿ç”¨ParallelOldGC")])]),a._v(" "),t("tr",[t("td",[a._v("-XX:+UseConcMarkSweepGC")]),a._v(" "),t("td",[a._v("æ–°ç”Ÿä»£ParNew,è€å¹´ä»£ä½¿ç”¨CMS")])]),a._v(" "),t("tr",[t("td",[a._v("-XX:+UseG1GC")]),a._v(" "),t("td",[a._v("ä½¿ç”¨G1å›æ”¶å™¨ï¼Œä½œç”¨äºæ–°è€ä»£")])])])]),a._v(" "),t("h4",{attrs:{id:"cms"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cms"}},[a._v("#")]),a._v(" CMS")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("â€“XX"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CMSInitiatingOccupancyFraction")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("70")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UseCMSInitiatingOccupancyOnly")]),a._v("\n")])])]),t("p",[a._v("CMSå›æ”¶é˜ˆå€¼ï¼Œå¦‚æœæƒ³æŒ‡å®šï¼Œå¿…é¡»æŠŠOnlyé‚£ä¸ªå‚æ•°ä¹Ÿå¸¦ä¸Šï¼Œå¦åˆ™JVMåªç®¡ä¸€æ¬¡ï¼Œåç»­è‡ªåŠ¨è°ƒæ•´")]),a._v(" "),t("p",[a._v("æˆ‘ä¸€èˆ¬éƒ½ä¸è®¾ç½®è¿™ä¸¤ä¸ªå‚æ•°ğŸ˜‚")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ExplicitGCInvokesConcurrent")]),a._v("\n")])])]),t("p",[a._v("å¦‚æœä»£ç ä¸­æœ‰system.gc()çš„è¯ï¼Œä¼šç›´æ¥æ¥ä¸€æ¬¡FullGC")]),a._v(" "),t("p",[a._v("è¿™ä¸ªå‚æ•°å¯ä»¥è®©CMSå¹¶è¡Œæ‰§è¡ŒFullGC")]),a._v(" "),t("h4",{attrs:{id:"g1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#g1"}},[a._v("#")]),a._v(" G1")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MaxGCPauseMillis")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("200")]),a._v("\n")])])]),t("p",[a._v("æ¯æ¬¡å›æ”¶çš„è½¯æ—¶é—´é™åˆ¶")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("InitiatingHeapOccupancyPercent")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("45")]),a._v("\n")])])]),t("p",[t("strong",[a._v("å¯åŠ¨å¹¶å‘æ”¶é›†æ—¶çš„ç™¾åˆ†æ¯”")]),a._v("è¿™ä¸ªå‚æ•°å¾ˆé‡è¦ï¼Œè€Œä¸”ç‰¹å¼‚æ€§å¾ˆå¼ºï¼Œå»ºè®®ä»”ç»†ç ”ç©¶ç ”ç©¶")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("XX"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UseStringDeduplication")]),a._v("\n")])])]),t("p",[a._v("G1ç‹¬æœ‰çš„å­—ç¬¦ä¸²å»é‡æŠ€æœ¯ï¼Œå¾ˆæ¨èåŠ ä¸Š")])])}),[],!1,null,null,null);s.default=e.exports}}]);