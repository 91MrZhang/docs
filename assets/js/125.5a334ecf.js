(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{527:function(t,s,a){"use strict";a.r(s);var e=a(27),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("这个命令对于学习SQL优化就是重中之重了，详细参数介绍可以看这个")]),t._v(" "),a("p",[t._v("原文链接："),a("a",{attrs:{href:"https://www.cnblogs.com/tufujie/p/9413852.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/tufujie/p/9413852.html"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("我这里就简单介绍几个常用的，需要关注的地方")])]),t._v(" "),a("h3",{attrs:{id:"重点关注字段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重点关注字段"}},[t._v("#")]),t._v(" 重点关注字段")]),t._v(" "),a("h4",{attrs:{id:"type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[t._v("#")]),t._v(" type")]),t._v(" "),a("p",[t._v("能达到ref或者range就说明很不错了，如果是all就说明没走索引")]),t._v(" "),a("h4",{attrs:{id:"key"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#key"}},[t._v("#")]),t._v(" key")]),t._v(" "),a("p",[t._v("看看实际用到的索引键")]),t._v(" "),a("h4",{attrs:{id:"key-len"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#key-len"}},[t._v("#")]),t._v(" key_len")]),t._v(" "),a("p",[t._v("这个可以协助你判断联合索引是否派上用场了，计算方式跟字符集、是否允许为空有关，可以自行百度一下")]),t._v(" "),a("h4",{attrs:{id:"extra"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#extra"}},[t._v("#")]),t._v(" Extra")]),t._v(" "),a("ol",[a("li",[t._v("using index ：使用覆盖索引的时候就会出现")]),t._v(" "),a("li",[t._v("using where：在查找使用索引的情况下，需要回表去查询所需的数据")]),t._v(" "),a("li",[t._v("using index condition：查找使用了索引，但是需要回表查询数据")]),t._v(" "),a("li",[t._v("using index & using where：查找使用了索引，但是需要的数据都在索引列中能找到，所以不需要回表查询数据")]),t._v(" "),a("li",[t._v("using temporary：表示MySQL需要使用临时表来存储结果集，常见于排序和分组查询，常见 group by ; order by(耗能多)")]),t._v(" "),a("li",[t._v("using filesort：当Query中包含 order by 操作，而且无法利用索引完成的排序操作称为“文件排序”(耗能多)")])]),t._v(" "),a("h3",{attrs:{id:"慢查询日志的开启"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#慢查询日志的开启"}},[t._v("#")]),t._v(" 慢查询日志的开启")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/my.cnf \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mysqld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("slow_query_log")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("slow_query_log_file")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/lib/mysql/localhost-slow.log\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 阈值3秒")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("long_query_time")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n")])])]),a("p",[t._v("可以通过Mysql专用的分析工具mysqldumpslow分析一下")])])}),[],!1,null,null,null);s.default=r.exports}}]);