(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{556:function(a,s,t){"use strict";t.r(s);var e=t(27),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[a._v("注意")]),a._v(" "),t("p",[a._v("exp/imp配套使用")]),a._v(" "),t("p",[a._v("expdb/impdp配套使用")]),a._v(" "),t("p",[a._v("不能混用")])]),a._v(" "),t("h3",{attrs:{id:"备份前的准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备份前的准备工作"}},[a._v("#")]),a._v(" 备份前的准备工作")]),a._v(" "),t("p",[a._v("1、停业务，停监听")]),a._v(" "),t("p",[a._v("2、不要停数据库实例")]),a._v(" "),t("p",[a._v("3、oracle权限先建一个物理路径")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" /oracle/expdb/dump\n")])])]),t("p",[a._v("4、sqlplus建一个逻辑路径，绑定上")]),a._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" directory expdpdump "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" '"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("oracle"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("expdb"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("dump")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("h3",{attrs:{id:"开始备份"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始备份"}},[a._v("#")]),a._v(" 开始备份")]),a._v(" "),t("p",[a._v("oracle用户下，这里只备份DATABASE1，CONTENT=ALL指全库备份，")]),a._v(" "),t("p",[a._v("PARALLEL=32指32个线程同时导出，量力而行，并且我印象中，导出是多少线程，导入就要多少线程")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("expdp system/oracle  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("schemas")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DATABASE1  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DIRECTORY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("expdpdump "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DUMPFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DATABASE1_%U.dmp "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("logfile")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DATABASE1.log  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CONTENT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("ALL "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PARALLEL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("32")]),a._v("\n")])])]),t("h3",{attrs:{id:"恢复前的准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#恢复前的准备工作"}},[a._v("#")]),a._v(" 恢复前的准备工作")]),a._v(" "),t("p",[a._v("1、全库备份一般只做异机恢复，不做原机恢复")]),a._v(" "),t("p",[a._v("2、恢复之前确保表空间大小充足，最好新建一样名称的用户，因为有的存储过程或函数DML时喜欢按加上数据库用户")]),a._v(" "),t("p",[a._v("3、导入之前也要像导出时建一个物理目录，并且把导出文件放进去，然后再创建一个逻辑路径")]),a._v(" "),t("h3",{attrs:{id:"开始恢复"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始恢复"}},[a._v("#")]),a._v(" 开始恢复")]),a._v(" "),t("p",[a._v("oracle用户下")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("impdp system/oracle "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DIRECTORY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("expdpdump "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DUMPFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DATABASE1_%U.dmp "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("logfile")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("imp_DATABASE1.log "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PARALLEL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("32")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("comm")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("it")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Y\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);