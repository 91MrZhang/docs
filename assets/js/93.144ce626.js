(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{496:function(s,t,a){"use strict";a.r(t);var r=a(27),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"grep"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grep"}},[s._v("#")]),s._v(" grep")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("grep")]),s._v(" "),a("p",[s._v("grep 是一个很实用很实用的命令，有很多花样参数和应用场景")]),s._v(" "),a("p",[s._v("参数网上很多，在这里不赘述了，讲几个工作中常遇到的场景")]),s._v(" "),a("p",[s._v("这个命令也是传说中Linux三剑客的其中一剑了")])]),s._v(" "),a("h4",{attrs:{id:"grep日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grep日志"}},[s._v("#")]),s._v(" grep日志")]),s._v(" "),a("p",[s._v("例如，最近线上平台总是出问题，我知道出现问题时的日志关键字是 'XssRequestFilterImpl.java:125'")]),s._v(" "),a("p",[s._v("那我这样执行的话，就可以直接观测出哪个时间点出现了问题，方便统计")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@xxxx tomcat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# grep 'XssRequestFilterImpl.java:125' bt-20200426.log ")]),s._v("\nINFO   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jvm "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/04/26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":11:57 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \tat xxxx.XssRequestFilterImpl.filterRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("XssRequestFilterImpl.java:125"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nINFO   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jvm "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/04/26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":13:19 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \tat xxxx.XssRequestFilterImpl.filterRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("XssRequestFilterImpl.java:125"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nINFO   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jvm "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/04/26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":21:23 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \tat xxxx.XssRequestFilterImpl.filterRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("XssRequestFilterImpl.java:125"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nINFO   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jvm "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/04/26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":21:30 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \tat xxxx.XssRequestFilterImpl.filterRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("XssRequestFilterImpl.java:125"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nINFO   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jvm "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/04/26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":22:53 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \tat xxxx.XssRequestFilterImpl.filterRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("XssRequestFilterImpl.java:125"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nINFO   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jvm "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/04/26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":22:58 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \tat xxxx.XssRequestFilterImpl.filterRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("XssRequestFilterImpl.java:125"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nINFO   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jvm "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/04/26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":04:03 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \tat xxxx.XssRequestFilterImpl.filterRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("XssRequestFilterImpl.java:125"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@xxxx tomcat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])])]),a("h4",{attrs:{id:"grep递归"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grep递归"}},[s._v("#")]),s._v(" grep递归")]),s._v(" "),a("p",[s._v("新上手一个系统，光配置文件就一大堆，想查某一个配置和哪些配置关联")]),s._v(" "),a("p",[s._v("这个递归查询命令，就比较实用了，例如我想查查这个8443都在哪些配置文件出现")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -rn "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'8443'")]),s._v(" *\n")])])]),a("p",[s._v("或者指定文件类型")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -rn "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'8443'")]),s._v(" *.properties\n")])])]),a("p",[s._v("就可以去下面这两个文件直接更改试试，看看是否生效了")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@xxxx config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# grep -rn '8443' *")]),s._v("\nconfig.properties:188:appserver.https.portnumber"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8443")]),s._v("\ntomcat/conf/server.xml:78:               "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("redirectPort")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8443"')]),s._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\ntomcat/conf/server.xml:89:    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("-- Direct HTTPS connector on port "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8443")]),s._v(". For standalone installations and direct application server use --"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\ntomcat/conf/server.xml:70:    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Connector "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8443"')]),s._v("\n")])])]),a("h4",{attrs:{id:"grep条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grep条件"}},[s._v("#")]),s._v(" grep条件")]),s._v(" "),a("p",[s._v("有的时候你想多查询几个条件，这里说一下与条件和或条件")]),s._v(" "),a("p",[s._v("或条件，-E参数使用")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ll "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -E "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'f|k'")]),s._v("\n")])])]),a("p",[s._v("与条件多个grep即可")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ll "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" k "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" f \n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("【ll |grep k |grep f】 命令中的 【|】 并不只是对grep有效")]),s._v(" "),a("p",[s._v("【|】这个管道符，实际上是linux的与条件,")]),s._v(" "),a("p",[s._v("专业的描述:把前一个命令得到的结果，当作是后一个命令的输入")])]),s._v(" "),a("p",[s._v("下方是查询结果")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@xxxx zyttest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":44 fb.txt\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":44 fff.txt\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":45 fk.txt\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":44 kkk.txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@xxxx zyttest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll |grep -E 'f|k'")]),s._v("\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":44 fb.txt\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":44 fff.txt\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":45 fk.txt\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":44 kkk.txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@xxxx zyttest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll |grep k |grep f ")]),s._v("\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":45 fk.txt\n")])])]),a("h4",{attrs:{id:"grep反向查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grep反向查询"}},[s._v("#")]),s._v(" grep反向查询")]),s._v(" "),a("p",[s._v("如果我正在tail一个日志，但是总出现一堆垃圾信息")]),s._v(" "),a("p",[s._v("那么可以使用 grep -v 给反向掉")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v\n")])])]),a("p",[s._v("例如我只想查询LOG级别在DEBUG之外的，因为DEBUG太多了，影响观测")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f stdout-stderr-20200427.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DEBUG'")]),s._v("\n")])])]),a("p",[s._v("再复杂的一些的，就得现用现写了，而且都得是结合其他命令配合使用的")]),s._v(" "),a("p",[s._v("过于复杂的文本分析，如果日志文件不大的话，我建议直接down到本地拿文本编辑器处理了")]),s._v(" "),a("p",[s._v("不过grep还是用的越6越好，一点坏处没有")])])}),[],!1,null,null,null);t.default=e.exports}}]);